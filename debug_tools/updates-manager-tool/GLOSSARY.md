# üìñ Updates Manager Tool - Glossary & Terminology

**Complete reference of all terms, acronyms, and concepts used in the Updates Manager Tool.**

---

## Core Concepts

### **Device**
A physical or virtual instance that runs Meeting software and can receive updates.

**Examples**: RTSP-Recorder unit, Jupiter appliance, RTSP-Viewer server
**Key properties**: `device_key`, `device_type`, `distribution`, `installed_version`
**See also**: [Device Type](#device-type), [Distribution](#distribution)

---

### **Device Key**
Unique identifier for a specific device instance.

**Format**: 256-character alphanumeric string (SHA256-like)
**Example**: `ABC123DEF456GHI789JKL012MNO345PQR678STU901VWX234YZ...`
**Generated by**: Device registration during bootstrap
**Used for**: Tracking individual devices, associating updates
**See also**: [Device](#device)

---

### **Device Type**
Category or model of device in the fleet.

**Examples**: 
- `RTSP-Recorder` - RPi cam recorder
- `Jupiter` - Jupiter appliance
- `RTSP-Viewer` - Stream viewer
- `test` - Development device

**Rules**: `[A-Za-z0-9._-]{1,128}`
**Managed in**: Admin panel or API
**See also**: [Distribution](#distribution)

---

### **Distribution**
Release channel for a specific device type.

**Examples**:
- `232` - Production (stable)
- `beta` - Beta testing (limited devices)
- `alpha` - Development/canary (1-2 devices)
- `other` - Custom channel
- `test2` - Testing channel

**Rules**: `[A-Za-z0-9._-]{1,128}`
**Auto-populated from**: Device type configuration
**See also**: [Device Type](#device-type), [Channel](#channel)

---

### **Version**
Semantic version number of an update.

**Format**: `[A-Za-z0-9._-]{1,64}` (typically X.Y.Z or X.Y.Z-rc1)
**Examples**: `2.33.07`, `1.0.0`, `2.34.00-rc1`, `1.2.3-beta`
**Unique per**: Device type + distribution combination
**See also**: [Update](#update), [Manifest](#manifest)

---

### **Update**
A software release that can be deployed to devices.

**Components**:
1. **Archive** - Compressed file (tar.gz or zip)
2. **Manifest** - JSON metadata
3. **Changelog** (optional) - Human-readable release notes

**Located at**: `/var/meeting/published/{device_type}/{distribution}/{version}/`
**See also**: [Archive](#archive), [Manifest](#manifest)

---

### **Archive**
Compressed file containing the actual update software.

**Formats**: `.tar.gz` (recommended) or `.zip`
**Max size**: 100 MB
**Example**: `rpi-cam-update_2.33.07_20260204_143022.tar.gz`
**Contents**: Binaries, libraries, installation scripts, data files
**Validated by**: SHA256 checksum
**See also**: [Update](#update), [Manifest](#manifest)

---

### **Manifest**
JSON file describing an update.

**Contains**:
- `version` - Version number
- `device_type` - Target device type
- `distribution` - Target distribution
- `archive` - Archive filename
- `sha256` - Checksum for integrity
- `size` - Archive size in bytes
- `notes` - Release notes
- `created_at` - Creation timestamp

**Location**: `/var/meeting/published/{type}/{dist}/{version}/manifest.json`
**See also**: [Update](#update), [Archive](#archive)

---

### **Channel**
Association between a device type + distribution and a target version.

**Creates**: A deployment group (e.g., "all beta devices should run v2.33.07")
**Components**: `device_type`, `distribution`, `target_version`, `active` flag
**Stored in**: MySQL `update_channels` table
**Example**: RTSP-Recorder/beta/default ‚Üí target v2.33.07
**See also**: [Update](#update), [Distribution](#distribution)

---

### **Fleet**
Collection of all devices in the Meeting ecosystem.

**Metrics tracked**:
- `UP_TO_DATE` - Installed version = target version
- `OUTDATED` - Update available
- `IN_PROGRESS` - Installation in progress
- `FAILED` - Last attempt failed
- `UNKNOWN` - No info (new device)

**Dashboard shows**: Count by state
**API endpoint**: `/api/admin/device-updates`
**See also**: [Device](#device), [Device State](#device-state)

---

### **Device State**
Current status of a device regarding updates.

**States**:
| State | Meaning | Action |
|-------|---------|--------|
| `UP_TO_DATE` | Installed = target | None needed |
| `OUTDATED` | Update available | Deploy update |
| `IN_PROGRESS` | Update installing | Wait & monitor |
| `FAILED` | Last attempt failed | Investigate & retry |
| `UNKNOWN` | No data yet | Wait for checkin |

**See also**: [Update](#update), [Fleet](#fleet)

---

## Authentication & Security

### **Bearer Token**
API authentication credential.

**Format**: `Bearer <32-character hex string>`
**Usage**: `curl -H "Authorization: Bearer abc123def456..." https://...`
**Generated by**: Admin > User Manager > Generate token
**Stored**: Windows Keyring (encrypted)
**Expires**: Per configuration (optional)
**Permissions**: JSON array of granted capabilities
**See also**: [Authentication](#authentication), [Permission](#permission)

---

### **Authentication**
Process of verifying user identity.

**Method**: Bearer token in Authorization header
**Header format**: `Authorization: Bearer <token>`
**Fallback methods** (server-side):
1. `getallheaders()` (PHP built-in)
2. `apache_request_headers()` (Apache module)
3. `$_SERVER['HTTP_AUTHORIZATION']` (FastCGI/Nginx)
4. `$_SERVER['REDIRECT_HTTP_AUTHORIZATION']` (Apache env)

**See also**: [Bearer Token](#bearer-token), [Authorization](#authorization)

---

### **Authorization**
Process of verifying user permissions.

**After authentication**, system checks:
- Token is not expired
- User account is active
- User has required permissions (e.g., `updates:publish`)

**Permissions stored as**: JSON array in `builder_users.permissions`
**Example**: `["admin:full", "updates:publish", "fleet:view"]`
**See also**: [Authentication](#authentication), [Permission](#permission)

---

### **Permission**
Specific capability granted to a user.

**Common permissions**:
- `admin:full` - Superuser (all actions)
- `updates:publish` - Can publish updates
- `updates:view` - Can read channels/versions
- `fleet:view` - Can view devices
- `fleet:manage` - Can modify devices
- `channels:edit` - Can create/edit channels

**Assigned to**: User accounts
**Checked on**: Each API request
**See also**: [Authorization](#authorization), [Bearer Token](#bearer-token)

---

## APIs & Endpoints

### **REST API**
Representational State Transfer API.

**Endpoint structure**:
```
GET  /api/admin/update-channels          # List channels
POST /api/admin/updates/publish          # Upload update
GET  /api/admin/updates/verify           # Check publication
GET  /api/admin/updates/device-types     # List device types
GET  /api/admin/updates/versions         # List versions
GET  /api/admin/device-updates           # Fleet status
GET  /api/admin/device-update-history    # Deployment history
```

**Base URL**: `https://meeting.ygsoft.fr`
**Authentication**: Bearer token (required for most)
**Response format**: JSON
**See also**: [Endpoint](#endpoint), [HTTP Methods](#http-methods)

---

### **Endpoint**
Specific URL path + HTTP method.

**Format**: `METHOD /path`
**Examples**:
- `GET /api/admin/update-channels` - List channels
- `POST /api/admin/updates/publish` - Upload
- `GET /api/admin/updates/verify` - Verify

**See also**: [REST API](#rest-api), [HTTP Methods](#http-methods)

---

### **HTTP Methods**
Standard verbs for REST API operations.

| Method | Purpose | Example |
|--------|---------|---------|
| `GET` | Retrieve data | List channels |
| `POST` | Create/update data | Publish update |
| `PUT` | Replace resource | (not used here) |
| `DELETE` | Remove resource | (not used here) |

**See also**: [REST API](#rest-api), [Endpoint](#endpoint)

---

## File Structures

### **Published Root**
Directory tree on Meeting server.

**Path**: `/var/meeting/published/`
**Structure**:
```
/var/meeting/published/
‚îú‚îÄ‚îÄ {device_type}/
‚îÇ   ‚îî‚îÄ‚îÄ {distribution}/
‚îÇ       ‚îî‚îÄ‚îÄ {version}/
‚îÇ           ‚îú‚îÄ‚îÄ manifest.json
‚îÇ           ‚îú‚îÄ‚îÄ {archive_file}
‚îÇ           ‚îú‚îÄ‚îÄ CHANGELOG.md (optional)
‚îÇ           ‚îî‚îÄ‚îÄ manifest.sig (optional)
```

**Example**:
```
/var/meeting/published/RTSP-Recorder/232/2.33.07/
‚îú‚îÄ‚îÄ manifest.json
‚îú‚îÄ‚îÄ rpi-cam-update_2.33.07_20260204_143022.tar.gz
‚îî‚îÄ‚îÄ CHANGELOG.md
```

**Permissions**: Readable by www-data, writable by PHP
**See also**: [Archive](#archive), [Manifest](#manifest)

---

### **Profile**
User configuration for connecting to a Meeting server.

**Contains**:
- Name (identifier)
- Base URL (https://meeting.ygsoft.fr)
- Timeout (seconds)
- Retries (attempt count)
- Token (Bearer token)

**Stored in**: `~/.updates-manager/profiles.json`
**Multiple profiles**: One per server/environment
**Active profile**: Used for all API calls
**See also**: [Bearer Token](#bearer-token)

---

## Database Concepts

### **MySQL Table: update_channels**
Stores channel definitions.

**Columns**:
- `id` - Primary key
- `device_type` - Target device type
- `distribution` - Target distribution
- `channel` - Channel name (usually "default")
- `target_version` - Version to deploy
- `active` - Is this channel active?
- `created_at`, `updated_at` - Timestamps

**See also**: [Channel](#channel)

---

### **MySQL Table: devices**
Stores device registry.

**Columns**:
- `id` - Primary key
- `device_key` - Unique identifier
- `device_type` - Device type
- `distribution` - Distribution assignment
- `installed_version` - Current version
- `last_seen` - Last checkin timestamp
- `created_at` - Registration time

**See also**: [Device](#device), [Device Key](#device-key)

---

### **MySQL Table: device_update_attempts**
Stores update attempt history.

**Columns**:
- `id` - Primary key
- `device_id` - Foreign key to devices
- `from_version` - Previous version
- `to_version` - Target version
- `status` - PENDING/IN_PROGRESS/SUCCESS/FAILED
- `message` - Error message (if failed)
- `started_at`, `completed_at` - Timestamps
- `created_at` - Record creation

**See also**: [Device](#device), [Update](#update)

---

### **MySQL Table: builder_users**
Stores API user accounts.

**Columns**:
- `id` - Primary key
- `username` - Login name
- `email` - Contact email
- `token` - Bearer token
- `token_expires_at` - Expiration (optional)
- `permissions` - JSON array of permissions
- `active` - Is account active?
- `created_at` - Registration time

**See also**: [Bearer Token](#bearer-token), [Permission](#permission)

---

## Deployment Strategies

### **Canary Deployment**
Staged rollout to minimize risk.

**Stages**:
1. **Alpha** (1-2 devices) - Test on dev device
2. **Beta** (10-20% of fleet) - Limited user acceptance test
3. **Production** (100%) - Full rollout

**Duration**: ~8 hours total
**Success metric**: > 95% devices updated successfully
**Rollback**: If failure rate > 5%, rollback to previous version
**See also**: [Staging Deployment](#staging-deployment)

---

### **Staging Deployment**
Testing environment before production.

**Typical path**:
1. Build in CI/CD pipeline
2. Publish to `alpha` channel
3. Manual testing on alpha device
4. If OK, promote to `beta`
5. If OK after 2h, promote to production

**See also**: [Canary Deployment](#canary-deployment)

---

### **Rollback**
Reverting to a previous version after failed update.

**Procedure**:
1. Identify failed update
2. Disable problematic channel
3. Create rollback channel pointing to prior version
4. Monitor as devices revert
5. Investigate root cause

**See also**: [Canary Deployment](#canary-deployment)

---

## CLI & GUI

### **CLI (Command Line Interface)**
Text-based interface for automation.

**Tool**: `python -m app.cli` or `.\Run-CLI.ps1`
**Commands**:
- `list-channels` - List distribution channels
- `publish` - Publish update
- `verify` - Verify publication
- `fleet` - Check device status
- `history` - View update history

**Output formats**: Human-readable or JSON (--json)
**Use case**: Scripting, CI/CD, automation
**See also**: [GUI](#gui)

---

### **GUI (Graphical User Interface)**
Visual interface for interactive work.

**Tool**: `python run.py` or `.\Start-GUI.ps1`
**Tabs**:
- Dashboard - Overview
- Channels - Manage channels
- Publish - Upload update
- Fleet - Monitor devices
- History - View deployments
- Diagnostics - Test connectivity
- Settings - Configure profiles

**Use case**: Manual operations, visualization, learning
**See also**: [CLI](#cli)

---

## Time-Related Terms

### **Last Seen**
Timestamp of last device communication.

**Format**: ISO 8601 (2026-02-04T14:22:15Z)
**Indicates**: Device connectivity, staleness
**Used for**: Device health assessment
**See also**: [Device](#device)

---

### **Expiration** (Token)
When a Bearer token becomes invalid.

**Format**: ISO 8601 timestamp
**Example**: Token valid until 2026-06-04T00:00:00Z
**Check**: Automatic on each API request
**Expired handling**: Reject with 401 AUTH_EXPIRED
**See also**: [Bearer Token](#bearer-token)

---

## Common Abbreviations

| Abbreviation | Meaning | Example |
|--------------|---------|---------|
| API | Application Programming Interface | `/api/admin/updates/publish` |
| CLI | Command Line Interface | `.\Run-CLI.ps1 publish` |
| GUI | Graphical User Interface | `.\Start-GUI.ps1` |
| HTTPS | Secure HTTP | `https://meeting.ygsoft.fr` |
| JSON | JavaScript Object Notation | `{"version": "2.33.07"}` |
| REST | Representational State Transfer | REST API |
| SHA256 | Cryptographic hash (256-bit) | Archive checksum |
| UUID | Universally Unique Identifier | Device key (similar) |
| YAML | YAML Ain't Markup Language | CI/CD config format |
| CI/CD | Continuous Integration / Deployment | GitLab, GitHub Actions |

---

## Error Codes

### **Authentication Errors**
| Code | Meaning | Fix |
|------|---------|-----|
| `AUTH_MISSING` | No authorization header | Add `Authorization: Bearer token` |
| `AUTH_DENIED` | Invalid token | Regenerate token in Admin |
| `AUTH_EXPIRED` | Token expired | Generate new token |

---

### **Validation Errors**
| Code | Meaning | Fix |
|------|---------|-----|
| `VALIDATION_FAILED` | Invalid parameters | Check format (rules below) |
| `DEVICE_TYPE_INVALID` | Device type format wrong | Use [A-Za-z0-9._-]{1,128} |
| `VERSION_INVALID` | Version format wrong | Use [A-Za-z0-9._-]{1,64} |

---

### **Resource Errors**
| Code | Meaning | Fix |
|------|---------|-----|
| `NOT_FOUND` | Update doesn't exist | Publish first |
| `FILE_NOT_FOUND` | Source file missing | Check path |
| `FILE_TOO_LARGE` | Archive > 100 MB | Compress more |

---

### **Server Errors**
| Code | Meaning | Fix |
|------|---------|-----|
| `DISK_FULL` | Server storage full | Delete old versions |
| `DATABASE_ERROR` | MySQL query failed | Check server logs |
| `INTERNAL_ERROR` | Unexpected server error | Contact admin |

---

## Format Reference

### **Device Type Format**
```
[A-Za-z0-9._-]{1,128}

‚úÖ Valid:
  - RTSP-Recorder
  - Jupiter
  - rtsp_viewer
  - device.type.v2
  - test-123

‚ùå Invalid:
  - RTSP Recorder (space)
  - Device@Type (special char)
  - "" (empty)
```

---

### **Version Format**
```
[A-Za-z0-9._-]{1,64}

‚úÖ Valid:
  - 2.33.07
  - 1.0.0
  - 2.34.00-rc1
  - 1.2.3-beta
  - v1.2.3

‚ùå Invalid:
  - 2.33.07 final (space)
  - Version 2.33 (text prefix)
  - "" (empty)
```

---

## Cross-References

### **Learning Paths**
- **First-time user**: Start with [Device](#device), [Update](#update), [Archive](#archive)
- **Admin**: Study [Authentication](#authentication), [Authorization](#authorization), [Permission](#permission)
- **Developer**: Review [API](#rest-api), [Endpoint](#endpoint), [Bearer Token](#bearer-token)
- **DevOps**: Focus on [Canary Deployment](#canary-deployment), [Rollback](#rollback), [Channel](#channel)

---

## Related Documentation

- **Main Guide**: [DOCUMENTATION.md](./DOCUMENTATION.md)
- **API Reference**: [API_SERVER_REFERENCE.md](./API_SERVER_REFERENCE.md)
- **Integration**: [INTEGRATION_GUIDE.md](./INTEGRATION_GUIDE.md)
- **Quick Ref**: [QUICK_REFERENCE.md](./QUICK_REFERENCE.md)
- **Index**: [DOCS_INDEX.md](./DOCS_INDEX.md)

---

**Glossary v1.0.0** | Created: 2026-02-04

*Last updated: 2026-02-04 - All terms current*
