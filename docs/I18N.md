# I18N — Internationalisation

## Objectif
Le Web Manager utilise un système i18n léger et sans dépendances pour fournir une interface multilingue.
Toutes les chaînes visibles par l’utilisateur doivent être référencées par une clé stable.

## Emplacement des traductions
- Fichiers de traduction : web-manager/i18n/en.json, web-manager/i18n/fr.json
- Format : JSON plat (clés de type ui.section.element)

Exemple :
```
"ui.actions.save": "Sauvegarder"
```

## Convention de nommage des clés
- Préfixe `ui.` pour toute chaîne UI.
- Groupes par domaine fonctionnel :
  - `ui.actions.*`
  - `ui.errors.*`
  - `ui.system.*`
  - `ui.network.*`
  - `ui.camera.*`
  - `ui.meeting.*`
- Clés stables et lisibles (pas basées sur le texte brut).

## Sélection de la langue
Ordre de priorité (server-side) :
1. Query param `?lang=fr`
2. Cookie `lang`
3. Variable d’environnement `RTSP_UI_LANG`
4. Config `UI_LANG` dans config.env
5. Langue par défaut : `fr`

Le sélecteur de langue en header utilise `setLanguage()` et déclenche le rechargement via `?lang=xx`.
Le cookie est ensuite persisté par le serveur.

## Helper de traduction
- Backend (Python) : `t(key, lang=None, params=None)`
  - Fallback : langue demandée → langue par défaut → clé
- Frontend (JS) : `window.t(key, params)`
  - Fallback : traductions courantes → traductions fallback → clé

## Ajouter une nouvelle langue
1. Copier un fichier existant :
   - web-manager/i18n/fr.json → web-manager/i18n/es.json
2. Traduire toutes les valeurs.
3. Ajouter `"i18n.language_name": "Español"`.
4. Redémarrer le service Web Manager.

## Tests
- Tests unitaires i18n :
  - tests/test_i18n_service.py
- Vérification statique des chaînes UI :
  - tests/test_i18n_static.py

Exécution locale :
```
python -m pytest -q
```

## Notes UTF-8
- Tous les fichiers modifiés doivent rester en UTF-8.
- Éviter les chaînes accentuées hardcodées dans le code : utilisez des clés i18n.
